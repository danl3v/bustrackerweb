{% extends "base.html" %}

{% block extrahead %}
<script src="/js/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="/js/clock.js" type="text/javascript"></script>
<script src="/js/predictions.js" type="text/javascript"></script>
{% if show_news_feed %}
<script src="/js/posts.js" type="text/javascript"></script>
<script>

var timer;

function showScrollBars() {
	document.documentElement.style.overflow = 'auto';
	clearTimeout(timer);
}

function adjustLayout() {
	var documentHeight;
	document.documentElement.style.overflow = 'hidden';
	$('#divider').height(0);
	$('#news-feed-background').css('width', 0);
	documentHeight = $(document).height() - 1;
	$('#divider').height(documentHeight);
	$('#news-feed-background').css('width', {{ show_news_feed }} + '%');
	$('#news-feed-background').css('height', documentHeight);
	clearTimeout(timer);
	timer = setTimeout("showScrollBars()", 1000);
}

$(document).ready(function() {
	adjustLayout();		
	$('#header').css('width', 100 - {{ show_news_feed }} + '%');
	$('#divider').css('left', 100 - {{ show_news_feed }} + '%');
	$('#stop-list-container').css('width', 100 - {{ show_news_feed }} + '%');
	$('#news-feed-list-container').css('width', {{ show_news_feed }} + '%');
	$('#footer').css('width', 100 - {{ show_news_feed }} + '%');
	window.onresize = function(event) { adjustLayout(); };
});
</script>
{% endif %}
{% endblock %}
{% block content %}
{% if show_news_feed %}<div id="news-feed-background"></div><div id="divider"></div>{% endif %}
<div id="header"><p>Transit Arrival Times</p><span id="clock">&nbsp;</span></div>

<div id="main">
	{% if show_news_feed %}
	
	<div id="container">
		<div id="stop-list-container">
			<table id="stop-list" class="list">
				<tr class="header1"><td class="header1-left" colspan="2">Loading arrivals...</td></tr>
			</table>
		</div>
		<div id="news-feed-list-container">
			<table id="news-feed-list" class="list">
				<tr class="header1"><td class="header1-left" colspan="2">Loading news feed...</td></tr>
			</table>
		</div>
	</div>
	{% else %}
	<table id="stop-list" class="list">
		<tr class="header1"><td class="header1-left" colspan="2">Loading arrivals...</td></tr>
	</table>
	{% endif %}
</div>

{% endblock %}