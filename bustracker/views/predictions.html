{% extends "base.html" %}

{% block extrahead %}
<script src="/js/jquery.js" type="text/javascript"></script>
<script src="/js/jquery.tmpl.js" type="text/javascript"></script>
<script src="/js/knockout.js" type="text/javascript"></script>
<script src="/js/clock.js" type="text/javascript"></script>
{% if show_news_feed != 'no' %}
<script>
newsFeedWidth = {{ news_feed_width }};
$(document).ready(function() {
	getPosts();
});
</script>
{% endif %}
<script>
$(document).ready(function() {
	{% if show_banner %}setTimeout(hideBanner, 500);{% else %}$('#wrapper').fadeIn('slow');{% endif %}
});
</script>
{% endblock %}

{% block extrahtml %}{% if show_banner %}<div id="banner"><p style="padding-top: 20%;">{{ show_banner }}</p></div>{% endif %}{% endblock %}

{% block content %}
{% if show_news_feed != 'no' %}<div id="news-feed-background"></div><div id="divider"></div>{% endif %}
<div id="header"><p>Transit Arrival Times</p><span id="clock">&nbsp;</span></div>

<div id="main">
	{% if show_news_feed != 'no' %}
	
	<div id="container">
		<div id="stop-list-container">
			<table id="stop-list" class="list" data-bind="template: {name:'stopTemplate', foreach: stops}"></table>
		</div>
		<div id="news-feed-list-container">
			<table id="news-feed-list" class="list">
				<tr class="header1"><td class="header1-left">Loading news feed...</td></tr>
			</table>
		</div>
	</div>
	{% else %}
	<table id="stop-list" class="list">
		<table id="stop-list" class="list" data-bind="template: {name:'stopTemplate', foreach: stops}"></table>
	</table>
	{% endif %}
</div>

{% verbatim %}

<script type="text/x-jquery-tmpl" id="stopTemplate">
	<tr class="header1"><td class="header1-left">${title}</td><td class="header1-right"><a href="/stop/edit/${id}">edit</a></td></tr>
	{{tmpl(directions) "#directionTemplate"}}
</script>

<script type="text/x-jquery-tmpl" id="directionTemplate">
	{{if title}}<tr class="header2"><td class="header2-left" colspan="2">${title}</td></tr>{{/if}}
	{{tmpl(destinations) "#destinationTemplate"}}
</script>

<script type="text/x-jquery-tmpl" id="destinationTemplate">
	<tr class="header3"><td class="header3-left" colspan="2">${title}</td></tr>
	{{tmpl(vehicles) "#vehicleTemplate"}}
</script>

<script type="text/x-jquery-tmpl" id="vehicleTemplate">
	<tr class="header4"><td class="header4-left"><span class="big">${minutes}</span> minutes</td><td class="header4-right">${prettyTimeToLeave}</td></tr>
</script>

{% endverbatim %} 

<script src="/js/predictions_layout.js" type="text/javascript"></script>

{% endblock %}